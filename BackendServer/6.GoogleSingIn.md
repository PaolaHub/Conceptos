# Google Sign-In

Vamos a crear una aplicación en Google Developer Console.

Para ello vamos al siguiente Link:

https://developers.google.com/identity/sign-in/web/sign-in#before_you_begin

Una vez allí seguimos los pasos:

1. Before you begin => Configuramos un proyecto.
Una vez allí le damos a **Configurate project**.
He introducimos la información necesaria (nombre del projecto, tipo: Application Web.. ) para crearlo.

Una vez rellenado, le damos a crear y nos apareceran unos credenciales.
No preocuparse por estos credenciales por que luego se podrán ver desde la API Console.

Una vez creado el proyecto nos dirigimos entonces al **API Console** y seleccionamos
el proyecto creado.

Antes que nada hay que hacer unos pasos.

1. En Credenciales, podemos ver como nos aprecen nuestro credenciales:
 
       Client ID	275478591728-sdmersaqc5agrmg4712emf73orj2drp1.apps.googleusercontent.com
       Client secret	 IDpfPLgiiGRugwiG5RgyW3K3
     
2. Vamos al **OAuth consent screen** y rellanamos los campos de **Application name** y **Support email** y guardamos.
3. Ahora vamos a los **Credentials** y seleccionamos el de **Tipo Web Application** para editar y configurar un par de cosas:
  * Tenemos que irnos a **Authorised JavaSCript origins**. Ahí tenemos que escribir nuestras URI, tanto la del lado de angular,
    como la del lago de Node. Entonces:
    http://localhost:3000
    http://localhost:4200
    
    Con esto le estamos diciendo a Google que páginas o que dominios van a disparar esta aplicación y solo va aceptar estos.
    En nuestro caso, con el puerto 3000, Node va a disparar esta aplicación y con el puerto 4200 Angular.
    
 Y por ahora eso es todo lo que tebemos que configurar.
 
 2. Preparando un proyecto de prueba.
 
 Ya aquí nos pide que vayamos configurando un par de cosas en el lado de nuestra Web application.
 Es por eso que vamos a crearnos un pequeño proyecto de prueba.
 
 * Vamos a crear una nueva carpeta en el mismos directorio donde está nuestro proyecto de Node y Angular
 y le pomgamos **google-signin-demo**.
 * Nos vamos a la terminal y creamos un proyecto Node en ese directorio con **npm init**.
 * Ahora vamos a descargarnos un plugging para montar un servidor rápido en:
 
 https://github.com/johnpapa/lite-server con este comando => **npm install lite-server --save-dev**
 
 Para echar andar esta librería, solo tenemos que añadir en el **package.json**
 
     # Inside package.json...
      "scripts": {
        "dev": "lite-server"
      },
      
 * Ahora nos vamos a la terminal y ejecutamos el siguiente comando: **npm run dev**
  Esto echa andar el lite-server y vemos que está corriendo en el puerto 3000.
  (Nota. Anteriormente hemos definido en las credendiales que desde el puerto 3000 se va a llamar al Google-SignIn)
  Vamos bien!
 
 * Se nos abrira una página con un CANNOT GET por que no le hemos definido ningún index.
  Creemos un archivo **index.html** con la estructura básica de un html y le cambiamos el **title**
  del head a Google SignIn Demo. Si recargamos la página. Nos deberñia de salir bien.
  
  * Ahora tenemos que decirle al LiteServe que no corra en el puerto 3000. Porque cuando queramos levantar
  nuestro backend va a chocar.
  Para ello creamos un nuevo archivo **ls-config.json** y dentro tiene la configuracion del puerto y que corra en el 4200.
  
     {
       "port": 4200
     }
 
  Para decirle al lite-server que tiene una archivo de configuración, tenemos que irnos al package.json
  y editar lo siguiente: 
  
    "dev": "lite-server -c ls-config.json",
    
  *Todo esto se encuentra en la documentación del lite-serve
  
  Bajamos el servidor en la terminal y lo volvemos a llamar con **npm run dev**.
  Podemos observar que está corriendo en el puerto 4200.
  
  Seguimos con la documentación de Google..
 
 2. Load the Google Platform Library
 
 Hay que añadir el siguiente script en el **head** de **index.html**
 
    <script src="https://apis.google.com/js/platform.js" async defer></script>
 
 3. Specify your app's client ID
 
 Tenemos que añadir también la siguiente meta tag con nuestro ID, que lo enontramos en nuestras credenciales.
 (2)
 
    <meta name="google-signin-client_id" content="YOUR_CLIENT_ID.apps.googleusercontent.com">
    
 con nuestra credencial => 75478591728-sdmersaqc5agrmg4712emf73orj2drp1.apps.googleusercontent.com quedaría así.
 
    <meta name="google-signin-client_id" content="275478591728-sdmersaqc5agrmg4712emf73orj2drp1.apps.googleusercontent.com">
 
 2. Add a Google Sign-In button
 
 Ahora a agregar el button Google-Sign-In de nuestra aplicación.

  
     
